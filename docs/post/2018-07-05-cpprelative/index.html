<!DOCTYPE html>
<html 
    lang="en-us"
    class="no-js"
>



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">
    
    <meta name="generator" content="Hugo 0.59.0" />
    <meta name="generation-date" content="2019-11-07 08:56:43.38142 &#43;0800 CST m=&#43;0.178001001">
    <title>c&#43;&#43;开发环境 &middot; 云亦海</title>
    <link rel="shortcut icon" href="https://gerrywp.github.io/blog/img/favicon.ico">
    <link rel="icon" href="https://gerrywp.github.io/blog/img/favicon.ico">
    
<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/materialize.min.css">


<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/font-awesome.min.css">


    
    <link rel="stylesheet" href="https://gerrywp.github.io/blog/css/styles/railscasts.css">



<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/lightbox.css">


<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/main.css">


    <script src="https://gerrywp.github.io/blog/js/modernizr-latest.js"></script>
    <script src="https://gerrywp.github.io/blog/js/lazysizes.min.js"></script>
    <script src="https://gerrywp.github.io/blog/js/ls.noscript.min.js"></script>

    <script>
        window.lazySizesConfig = window.lazySizesConfig || {};
        lazySizesConfig.addClasses = true;
        lazySizesConfig.loadMode = 2;
    </script>

    
</head>



<body class="page-colors minimum-viewport-height">
    

<nav class="main-menu menu-colors">
    <ul class="menu menu-colors no-list-float">
        <li><a href="https://gerrywp.github.io/blog/"><i class="fa fa-home fa-2x"></i></a></li>
        <li>
            <a href="#!"><i class="fa fa-bars fa-2x"></i></a>

            
            <ul class="menu flexible-width menu-colors no-list-float">
                
                
                    <li class="active">
                    
                        <a href="/blog/post/">
                            
                            <span>Posts</span>
                        </a>
                    
                    </li>
                
            </ul>
        </li>
        <li><a href="#!" data-lightbox-id="searchbox"><i class="fa fa-search fa-2x"></i></a></li>
        
            <li class="blue-grey-text" style="border-top: 1px solid;"></li>
            
        
        <li class="blue-grey-text" style="border-top: 1px solid;"></li>
        <li>
            <a href="" type="application/rss+xml" target="_blank">
                <i class="fa fa-rss fa-2x"></i>
            </a>
        </li>
    </ul>
</nav>

<div id="searchbox" class="no-display">
    <div class="valign-wrapper fill-container">
        <div class="valign large-form horizontal-center-hack">
            <form method="get" id="search" action="http://duckduckgo.com/">
    <input type="hidden" name="sites"value="https://gerrywp.github.io/blog/"/>
    <input type="hidden" name="ka" value="h"/>
    <input type="hidden" name="k7" value="#fafafa"/>
    <input type="hidden" name="kj" value="#3f3f3f"/>
    <input type="hidden" name="ky" value="#fafafa"/>
    <input type="hidden" name="kx" value="b"/>
    <input type="hidden" name="kt" value="Helvetica"/>
    <input type="text" name="q" maxlength="255" placeholder="Search"/>
    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
</form>


        </div>
    </div>
</div>





    <div class="main-content">
        <div class="center-space">
            <div class="article-colors">
                
                <article>
                    <header>
                        <h1 class="article-title">c&#43;&#43;开发环境</h1>
                        <time class="date-color">Thu Jul 05, 2018</time>
                        <span class="separator">|</span>
                        
<ul class="categories">
    <li>
        <i class="fa fa-book"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/blog/categories/others">others</a></li>
    
</ul>


                        <span class="separator">|</span>
                        
<ul class="tags">
    <li>
        <i class="fa fa-tags"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/blog/tags/tag1">tag1</a></li>
    
</ul>


                    </header>

                    <hr>

                    <section>
                        
                            <p>　　在windows下做c++开发，不想使用微软系的IDE开发工具。</p>

<h3 id="mingw-minimalist-gnu-for-windows">minGW(Minimalist GNU for Windows)</h3>

<p>目的：开发Window原生应用，可以使用<code>gcc</code>、<code>g++</code>编译器，不使用<del>微软的cl编译器</del>,使用qt开发windows应用就会用到minGW,如果只用到标准c++库，
用minGW编译也是可以跨平台的。<br />
功能：用于开发原生(32位)Windows 应用的开发环境。它主要提供了针对win32应用的GCC、GNU (bin,utils)等工具，
以及对等于Windows SDK（的子集）的头文件和用于 MinGW 版本 linker 的库文件（so、a等，而不是 VC 的 lib）。<br />
下载安装：<a href="http://www.mingw.org/" title="点我访问">minGW</a>
点击会跳转到sourceforge站点，下载的是一个在线安装器，安装好之后设置环境变量即可</p>

<h3 id="cygwin">Cygwin</h3>

<p>目的：提供完整的类Unix环境，适用于在windows桌面下，开发运行于linux系统上的应用<br />
功能：提供了一整套的类linux环境，GCC、GNU工具<br />
下载：<a href="https://cygwin.com/install.html" title="点我访问">Cygwin</a></p>

<h3 id="安装android-sdk">安装android-sdk</h3>

<p><a href="https://blog.csdn.net/naipeng/article/details/72722682" title="点我访问">安装android sdk</a></p>

<h3 id="qt实战教程">QT实战教程</h3>

<p><a href="https://blog.csdn.net/liang19890820/article/details/50277095" title="点我访问">QT实战123</a></p>

<h3 id="makefile实战">makefile实战</h3>

<pre><code class="language-make">#获取所有cpp文件
files=$(wildcard *.cpp)
objs=$(patsubst %.cpp,%.o,$(files))
BIN=./bin/
OBJ=./obj/
exename=$(BIN)example.exe
object=$(addprefix $(OBJ),$(objs))
all:$(exename)

.PHONY:all clean createDir build
$(exename):$(files)
	g++ $^ -o $@ 
$(object):$(OBJ)%.o:%.cpp
	g++ -c $^ -o $@
createDir:
#for windows
	#if not exist &quot;obj&quot; (mkdir obj)
	#if not exist &quot;bin&quot; (mkdir bin)
#end for windows
#for linux
	if [ ! -d &quot;obj&quot; ]; then \
	mkdir &quot;obj&quot;; \
	fi
	if [ ! -d &quot;bin&quot; ]; then \
	mkdir &quot;bin&quot;; \
	fi
#end for linux
build:createDir $(object)
clean:
	@-del /s .\obj\$(objs) .\bin\*.exe 2&gt;nul
	
debug:
	echo $(OS)
</code></pre>

<p><code>objects=*.o</code>表示通配符同样可以用在变量中。但是*.o不会展开！object的值就是<code>*.o</code>。如果你要让通配符在变量中展开，
也就是让objects的值是所有.o的文件名的集合，那么你可以这样：</p>

<pre><code class="language-make">objects:=$(wildcard *.o)
</code></pre>

<p>具体请参考下面的文档第13页!</p>

<p>说明：<strong>在makefile文件中的linux命令，每一行都被当成是一条单独的指令，运行在各自不同的shell实例当中。因此当多条指令被当做一条指令执行的时候必须使用
<code>\</code>换行组合多条指令。这样shell会把这样的命令当作长字符串，回车将会被删除。所以<code>\</code>与指令之间需要有一个空格，因缺少回车每个指令的结尾需强制用分号
隔离命令！</strong></p>

<blockquote>
<p>参考</p>
</blockquote>

<p><a href="https://seisman.github.io/how-to-write-makefile/Makefile.pdf" title="点我访问">跟我一起写Makefile</a></p>

<p><a href="https://seisman.github.io/how-to-write-makefile/introduction.html" title="点我访问">在线Html版本</a></p>

<p><a href="https://www.gnu.org/software/make/manual/make.html#toc-An-Introduction-to-Makefiles" title="点我访问">官方文档</a></p>

<p>上面的创建目录的makefile文件处理的并不优雅，其实有更好的方式来处理目录的创建！目录是一个真实存在的文件，因此也可以作为一个target来进行创建</p>

<pre><code class="language-make">#此处只列出目录创建部分
OBJDIR=obj
BINDIR=bin
exename=$(BINDIR)/$(notdir $(CURDIR)).exe
srcfiles:=$(wildcard *.cpp)
destfiles:=$(patsubst %.cpp,%.o,$(srcfiles))
objs=$(addprefix $(OBJDIR)/,$(destfiles))
build:$(objs)
$(objs): |$(OBJDIR)
$(OBJDIR)/%.o:%.cpp
	$(CXX) -c $(OUTPUT_OPTION) $&lt;
$(OBJDIR):
	mkdir $@
</code></pre>

<p>这里使用了makefile内置变量替换了g++命令和参数，并且使用了pipe管道定义了一个$(OBJDIR)的<code>order-only-prerequisite</code>先决条件，只有第一次构造targets才会使用<code>order-only-prerequisite</code>,后面即使<code>order-only-prerequisite</code>发生了改变时间戳是最新的，也不会重新构造targets！</p>

<h4 id="phony">.PHONY</h4>

<p>伪目标：如果没有真实存在的<strong>文件</strong>与target目标形成一一对应关系，最好就是将该目标设置成<strong>伪目标</strong>。这样每次make phonyname都会被执行！而不管真实文件存在与否</p>

<h4 id="常用变量">常用变量</h4>

<p>获取当前操作系统：<code>$(OS)</code></p>

<pre><code class="language-make">clean:
  ifeq ($(OS),Windows_NT)
      del /s *.o *.d *.elf *.map *.log
  endif
</code></pre>

<h3 id="vs2017创建vc-general-makefile-project">VS2017创建vc++ general makefile project</h3>

<ol>
<li><p>首先需要安装<code>Windows Universal C Runtime</code>。
打开vs安装程序，选中<code>Individual Components</code>-&gt;<code>Windows Universal C Runtime</code>
&gt;如果不安装在创建makefile project的时候就会提示找不到很多头文件！</p></li>

<li><p>在项目下新建makefile文件，并编写编译过程。</p></li>

<li><p>安装<code>mingw</code>或者<code>cygwin</code>并配置好环境变量,使用g++来编译生成目标文件。</p></li>

<li><p>目标生成文件(.exe)需要生成到相对应的项目<code>Debug</code>和<code>Release</code>目录下，否则运行的时候窗口会一闪而过。</p></li>

<li><p>因为使用的是makefile文件，编译器使用的g++，<strong>暂时还未找到如何使用VS2017的集成调试工具来调试程序？？？</strong>。</p>

<pre><code class="language-make">#附上makefile文件
exe=$(notdir $(CURDIR)).exe
dbgexe=Debug/$(exe)
rlexe=Release/$(exe)
build:$(dbgexe)
build-release:$(rlexe)
$(dbgexe) $(rlexe):
	g++ -g main.cpp -o $@
rebuild:

clean:

.PHONY:build build-release rebuild rebuild-release clean
</code></pre></li>
</ol>
                        
                    </section>

                    <footer class="right-align">
                        <p><small>Copyright &#169; Gerry</small></p>
                    </footer>

                    


                </article>
            </div>
        </div>
    </div>

    
<script src="https://gerrywp.github.io/blog/js/jquery-2.1.4.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/materialize.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/imagesloaded.pkgd.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/masonry.pkgd.min.js"></script>


    
    <script src="https://gerrywp.github.io/blog/js/highlight.pack.js"></script>



<script src="https://gerrywp.github.io/blog/js/lightbox.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/jquery.infinitescroll.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/main.js"></script>


</body>

</html>





