<!DOCTYPE html>
<html 
    lang="en-us"
    class="no-js"
>



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">
    
    <meta name="generator" content="Hugo 0.59.0" />
    <meta name="generation-date" content="2019-11-06 19:45:08.7345917 &#43;0800 CST m=&#43;0.202975501">
    <title>线性存储和hashcode &middot; 云亦海</title>
    <link rel="shortcut icon" href="https://gerrywp.github.io/img/favicon.ico">
    <link rel="icon" href="https://gerrywp.github.io/img/favicon.ico">
    
<link rel="stylesheet" href="https://gerrywp.github.io/css/materialize.min.css">


<link rel="stylesheet" href="https://gerrywp.github.io/css/font-awesome.min.css">


    
    <link rel="stylesheet" href="https://gerrywp.github.io/css/styles/railscasts.css">



<link rel="stylesheet" href="https://gerrywp.github.io/css/lightbox.css">


<link rel="stylesheet" href="https://gerrywp.github.io/css/main.css">


    <script src="https://gerrywp.github.io/js/modernizr-latest.js"></script>
    <script src="https://gerrywp.github.io/js/lazysizes.min.js"></script>
    <script src="https://gerrywp.github.io/js/ls.noscript.min.js"></script>

    <script>
        window.lazySizesConfig = window.lazySizesConfig || {};
        lazySizesConfig.addClasses = true;
        lazySizesConfig.loadMode = 2;
    </script>

    
</head>



<body class="page-colors minimum-viewport-height">
    

<nav class="main-menu menu-colors">
    <ul class="menu menu-colors no-list-float">
        <li><a href="https://gerrywp.github.io/"><i class="fa fa-home fa-2x"></i></a></li>
        <li>
            <a href="#!"><i class="fa fa-bars fa-2x"></i></a>

            
            <ul class="menu flexible-width menu-colors no-list-float">
                
                
                    <li class="active">
                    
                        <a href="https://gerrywp.github.io//post/">
                            
                            <span>Posts</span>
                        </a>
                    
                    </li>
                
            </ul>
        </li>
        <li><a href="#!" data-lightbox-id="searchbox"><i class="fa fa-search fa-2x"></i></a></li>
        
            <li class="blue-grey-text" style="border-top: 1px solid;"></li>
            
        
        <li class="blue-grey-text" style="border-top: 1px solid;"></li>
        <li>
            <a href="" type="application/rss+xml" target="_blank">
                <i class="fa fa-rss fa-2x"></i>
            </a>
        </li>
    </ul>
</nav>

<div id="searchbox" class="no-display">
    <div class="valign-wrapper fill-container">
        <div class="valign large-form horizontal-center-hack">
            <form method="get" id="search" action="http://duckduckgo.com/">
    <input type="hidden" name="sites"value="https://gerrywp.github.io/"/>
    <input type="hidden" name="ka" value="h"/>
    <input type="hidden" name="k7" value="#fafafa"/>
    <input type="hidden" name="kj" value="#3f3f3f"/>
    <input type="hidden" name="ky" value="#fafafa"/>
    <input type="hidden" name="kx" value="b"/>
    <input type="hidden" name="kt" value="Helvetica"/>
    <input type="text" name="q" maxlength="255" placeholder="Search"/>
    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
</form>


        </div>
    </div>
</div>





    <div class="main-content">
        <div class="center-space">
            <div class="article-colors">
                
                <article>
                    <header>
                        <h1 class="article-title">线性存储和hashcode</h1>
                        <time class="date-color">Tue Jul 03, 2018</time>
                        <span class="separator">|</span>
                        
<ul class="categories">
    <li>
        <i class="fa fa-book"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/categories/others">others</a></li>
    
</ul>


                        <span class="separator">|</span>
                        
<ul class="tags">
    <li>
        <i class="fa fa-tags"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/tags/tag1">tag1</a></li>
    
</ul>


                    </header>

                    <hr>

                    <section>
                        
                            <p>　　数组就是典型的线性结构。对数组中特定<strong>值</strong>的查询，线性查询无疑是最慢的查询方式，时间复杂度为O(n):n为数组长度。
最合适的算法自然就是使用散列表了(HashTable)。</p>

<h3 id="线性查询">线性查询</h3>

<p>假如有一个庞大的字符串数组，给定你一个字符串，让你在数组中查找它是否存在，如何处理？</p>

<h4 id="速度缓慢的线性查找">速度缓慢的线性查找</h4>

<pre><code class="language-csharp">String query=&quot;please&quot;
String[] infiniteStr={&quot;name&quot;,&quot;is&quot;,&quot;a&quot;,&quot;value&quot;,&quot;chinese&quot;,&quot;boy&quot;,&quot;good&quot;,&quot;like&quot;};
  for(int i=0;i&lt;infiniteStr.Length;i++){
    if(query==infiniteStr[i]){
      Console.WriteLine(&quot;Find it!&quot;);
    return;
  }
}
</code></pre>

<p>线性查询的直接表现形式就是，使用for循环比较待查找的字符串与数组项的匹配时间复杂度O(n)。常用的字符串的查找方法通常使用的都是线性查找：</p>

<pre><code class="language-csharp">infiniteStr.IndexOf(&quot;name&quot;);
</code></pre>

<p>要达到一定的数量级散列才有价值，一般情况下对小型数组进行散列查询的情况比较少。</p>

<h3 id="map-think-in-java-17-9-2节">Map(Think in java 17.9.2节)</h3>

<p>在使用字典类型的数据的时候，散列查找突出了优势。
众所周知数组根据<strong>下标</strong>查询值的速度是最快的(时间复杂度O(1))，例如：</p>

<pre><code class="language-csharp">String val=infiniteStr[5];
</code></pre>

<p>字典存储数据的结构为<code>Map&lt;K,V&gt;</code>通常K都是一个Object类型，所以对于给定值V的查询，瓶颈在于键的查询速度(由于键没有按照特定顺序保存，只能使用简单的<strong>线性查询</strong>)。
透过《Think In Java》里面<strong>自定义SlowMap</strong>可以看到查询的缓慢因素所在。</p>

<pre><code class="language-java">//SlowMap.java
public V get(Object key){
  if(!keys.contains(key))
    return null;
  return values.get(keys.indexOf(key))//这里keys.indexOf(key)就是使用了线性查询，ArrayList源码里面的使用的就是for循环
}
</code></pre>

<p>散列：散列将键保存在某处，以便能够快速找到它！存储一组元素最快的数据结构是数组，所以使用它来表示键的信息(并不保存键本身)。因为数组最快的访问方式，
是使用下标访问，所以通过对键对象进行hash生成一个整数，将其作为数组的下标，这个数字就是<strong>散列码</strong>，由hashCode()方法生成并被使用！</p>

<h3 id="散列-原理">散列(原理)</h3>

<p>为解决数组容量被固定的问题，不同的键对象，可能产生相同的下标(这样会产生冲突)。因此数组多大就不重要了，任何键总能在数组中找到它的位置。<br />
于是查询一个值的过程首先就是计算散列码，然后使用散列码查询数组。如果能够保证没有冲突，就有了一个完美的<strong>散列函数</strong>。通常冲突由链表来处理：数组
并不保存值，而是保存值的链表。然后对<strong><em>List</em></strong>中的值使用 <strong>equals()</strong> 方法进行线性查询，这部分的查询自然比较慢，但是如果散列函数足够好，数组的每个位置
就只有较少的值。因此，不是查询整个<strong><em>List</em></strong>,而是快速地跳到数组的某个位置，对很少的元素进行比较。这就是HashMap会如此快的原因。
　　</p>
                        
                    </section>

                    <footer class="right-align">
                        <p><small>Copyright &#169; Gerry</small></p>
                    </footer>

                    


                </article>
            </div>
        </div>
    </div>

    
<script src="https://gerrywp.github.io/js/jquery-2.1.4.min.js"></script>


<script src="https://gerrywp.github.io/js/materialize.min.js"></script>


<script src="https://gerrywp.github.io/js/imagesloaded.pkgd.min.js"></script>


<script src="https://gerrywp.github.io/js/masonry.pkgd.min.js"></script>


    
    <script src="https://gerrywp.github.io/js/highlight.pack.js"></script>



<script src="https://gerrywp.github.io/js/lightbox.min.js"></script>


<script src="https://gerrywp.github.io/js/jquery.infinitescroll.min.js"></script>


<script src="https://gerrywp.github.io/js/main.js"></script>


</body>

</html>





