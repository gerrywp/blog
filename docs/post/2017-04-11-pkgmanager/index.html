<!DOCTYPE html>
<html 
    lang="en-us"
    class="no-js"
>



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">
    
    <meta name="generator" content="Hugo 0.59.0" />
    <meta name="generation-date" content="2019-11-07 10:38:14.5543942 &#43;0800 CST m=&#43;0.331970901">
    <title>linux下的软件管理 &middot; 云亦海</title>
    <link rel="shortcut icon" href="https://gerrywp.github.io/blog/img/favicon.ico">
    <link rel="icon" href="https://gerrywp.github.io/blog/img/favicon.ico">
    
<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/materialize.min.css">


<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/font-awesome.min.css">


    
    <link rel="stylesheet" href="https://gerrywp.github.io/blog/css/styles/railscasts.css">



<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/lightbox.css">


<link rel="stylesheet" href="https://gerrywp.github.io/blog/css/main.css">


    <script src="https://gerrywp.github.io/blog/js/modernizr-latest.js"></script>
    <script src="https://gerrywp.github.io/blog/js/lazysizes.min.js"></script>
    <script src="https://gerrywp.github.io/blog/js/ls.noscript.min.js"></script>

    <script>
        window.lazySizesConfig = window.lazySizesConfig || {};
        lazySizesConfig.addClasses = true;
        lazySizesConfig.loadMode = 2;
    </script>

    
</head>



<body class="page-colors minimum-viewport-height">
    

<nav class="main-menu menu-colors">
    <ul class="menu menu-colors no-list-float">
        <li><a href="https://gerrywp.github.io/blog/"><i class="fa fa-home fa-2x"></i></a></li>
        <li>
            <a href="#!"><i class="fa fa-bars fa-2x"></i></a>

            
            <ul class="menu flexible-width menu-colors no-list-float">
                
                
                    <li class="active">
                    
                        <a href="/blog/post/">
                            
                            <span>Posts</span>
                        </a>
                    
                    </li>
                
            </ul>
        </li>
        <li><a href="#!" data-lightbox-id="searchbox"><i class="fa fa-search fa-2x"></i></a></li>
        
            <li class="blue-grey-text" style="border-top: 1px solid;"></li>
            
        
        <li class="blue-grey-text" style="border-top: 1px solid;"></li>
        <li>
            <a href="" type="application/rss+xml" target="_blank">
                <i class="fa fa-rss fa-2x"></i>
            </a>
        </li>
    </ul>
</nav>

<div id="searchbox" class="no-display">
    <div class="valign-wrapper fill-container">
        <div class="valign large-form horizontal-center-hack">
            <form method="get" id="search" action="http://duckduckgo.com/">
    <input type="hidden" name="sites"value="https://gerrywp.github.io/blog/"/>
    <input type="hidden" name="ka" value="h"/>
    <input type="hidden" name="k7" value="#fafafa"/>
    <input type="hidden" name="kj" value="#3f3f3f"/>
    <input type="hidden" name="ky" value="#fafafa"/>
    <input type="hidden" name="kx" value="b"/>
    <input type="hidden" name="kt" value="Helvetica"/>
    <input type="text" name="q" maxlength="255" placeholder="Search"/>
    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
</form>


        </div>
    </div>
</div>





    <div class="main-content">
        <div class="center-space">
            <div class="article-colors">
                
                <article>
                    <header>
                        <h1 class="article-title">linux下的软件管理</h1>
                        <time class="date-color">Tue Apr 11, 2017</time>
                        <span class="separator">|</span>
                        
<ul class="categories">
    <li>
        <i class="fa fa-book"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/blog/categories/linux">linux</a></li>
    
</ul>


                        <span class="separator">|</span>
                        
<ul class="tags">
    <li>
        <i class="fa fa-tags"></i>
    </li>
    
        <li><a href="https://gerrywp.github.io/blog/tags/tag1">tag1</a></li>
    
</ul>


                    </header>

                    <hr>

                    <section>
                        
                            <p>linux界的 2 大主流软件管理方式(命令):RPM(RedHat Package Manager)和DPKG(Debian Packager)。<br />
它们对应的在线(线上)管理方式(命令):YUM(Yellowdog Updater, Modified)和APT(Advanced Packaging Tool)。</p>

<table>
<thead>
<tr>
<th align="center">distribution代表</th>
<th align="center">软件管理机制</th>
<th align="center">local安装指令</th>
<th align="center">online安装指令</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">Red Hat/Fedora</td>
<td align="center">RPM</td>
<td align="center">rpm</td>
<td align="center">yum</td>
</tr>

<tr>
<td align="center">Debian/Ubuntu</td>
<td align="center">DPKG</td>
<td align="center">dpkg</td>
<td align="center">apt</td>
</tr>
</tbody>
</table>

<h3 id="软件安装依赖">软件安装依赖</h3>

<p>rpm、dpkg安装包里面含有，安装软件所需要的依赖软件列表资料，linux有与之相对应的资料库。当安装软件的时候，rpm、dpkg会根据自身包里面的资料
去查询linux资料库判断依赖软件是否满足，若满足予以安装，若不满足则不予以安装。
那么安装的时候就将软件的相关信息，写入linux资料库，以便未来的查询、验证和反安装。
这种安装方式，需要手动解决依赖，也就是我们需要频繁的一次次下载、安装依赖软件！<br />
有没有什么方式可以解决？</p>

<h3 id="yum-apt-在线安装">yum/apt 在线安装</h3>

<p>通过yum/apt可以很好的自动化的解决软件之间的依赖关系。透过yum会去yum服务器上自动下载、安装依赖的软件。<br />
linux的rpm资料库路径为:<code>/var/lib/rpm/</code>,未來如果我们有任何软件升級的需求，
版本之间的比较就是来自于这个资料库， 而如果你想要查询系统已经安装的软件，也是从这里查询的！<br />
linux的dpkg资料库路径为:<code>/var/lib/apt/</code></p>

<h4 id="centos使用yum安装nodejs环境">centos使用yum安装nodejs环境</h4>

<p>通常情况下默认的yum资料库(repo)并不包含有些类型的软件，需要手动添加epel源</p>

<pre><code class="language-sh"># yum info 命令查看系统是否安装了epel包
yum info epel-release
# 安装nodejs
curl -sL https://rpm.nodesource.com/setup_6.x | bash -
sudo yum install -y nodejs
# 倘若上面执行curl -sL https://rpm.nodesource.com/setup_6.x | bash - 命令报错，需要切换到root用户
su -
或
sudo su -
</code></pre>

<h4 id="centos使用官方二进制数据包安装">centos使用官方二进制数据包安装</h4>

<p>使用<code>curl</code>命令下载官方二进制压缩包</p>

<pre><code class="language-sh"># 参数大写的-O/--remote-name表示，把输出写到该文件中，使用远程文件名
curl -O https://nodejs.org/dist/v6.11.5/node-v6.11.5-linux-x64.tar.xz
# 区别与-o参数
curl -o [文件名] https://nodejs.org/dist/v6.11.5/node-v6.11.5-linux-x64.tar.xz
# 由于上述文件使用的xz压缩，所以首先要使用xz命令解压缩
xz node-v6.11.5-linux-x64.tar.xz
# 解包
tar -xvf node-v6.11.5-linux-x64.tar
#将node程序移动到/usr/local目录
mv node-v6.11.5-linux-x64 /usr/local/
# 设置node执行文件环境变量
vim ~/.bashrc
export NODE_HOME='/usr/local/node-v6.11.5-linux-x64'
export PATH=${NODE_HOME}/bin:${PATH}
# 为man page添加映射路径
sudo vim /etc/man.config
# 添加以下数据
MANPATH_MAP /usr/local/node-v6.11.5-linux-x64/bin /usr/local/node-v6.11.5-linux-x64/share/man
</code></pre>

<h3 id="apt-apt-get-apt-cache-在线命令">apt、apt-get、apt-cache(在线命令)</h3>

<p>apt是apt-get和apt-cache的简单联合。以前需要apt-get、apt-cache组合使用的常规命令，现在只需要apt一个命令就可以解决了。</p>

<h4 id="apt-server的repository配置">apt server的repository配置</h4>

<p>apt使用的服务器或镜像站点，通过以下配置文件进行配置：  
<code>/etc/apt/sources.list</code>  
文件中的各项信息，通常以以下形式列出:  </p>

<p>deb <a href="http://host/debian">http://host/debian</a> distribution section1 section2 section3
deb-src <a href="http://host/debian">http://host/debian</a> distribution section1 section2 section3</p>

<pre><code class="language-sh"># See sources.list(5) for more information, especially
# Remember that you can only use http, ftp or file URIs
# CDROMs are managed through the apt-cdrom tool.
deb http://http.us.debian.org/debian stable main contrib non-free
deb http://non-us.debian.org/debian-non-US stable/non-US main contrib non-free
deb http://security.debian.org stable/updates main contrib non-free
     
# Uncomment if you want the apt-get source function to work
#deb-src http://http.us.debian.org/debian stable main contrib non-free
#deb-src http://non-us.debian.org/debian-non-US stable/non-US main contrib non-free
</code></pre>

<ol>
<li>目录中包含的是二进制软件包(deb)</li>
<li>目录中包含的是源码包(deb-src)</li>
</ol>

<h4 id="ppa-personal-package-archives-个人软件包档案">PPA(Personal Package Archives)个人软件包档案</h4>

<p>由于某些原因很多安装包不能进入Ubuntu官方的软件包仓库。为了方便用户使用便提供了PPA，允许用户建立自己的软件仓库，上传软件。<br />
PPA:A Personal Package Archive (PPA) is a software repository for uploading source packages to be built and published as an Advanced Packaging Tool repository by Launchpad.  
可以在<a href="https://launchpad.net/ubuntu/+ppas" title="点我访问">https://launchpad.net/ubuntu/+ppas</a>搜索需要的软件，并安装。如图所示：</p>

<p><img src="../../pictures/QQ20170411212128.png" alt="图片1" title="点我访问" />
<img src="../../pictures/QQ20170411212140.png" alt="图片2" title="点我访问" />
<img src="../../pictures/QQ20170411212145.png" alt="图片2" title="点我访问" /></p>

<pre><code class="language-sh"># systec:所有者(作者、组织),curl-7.35-trusty:库名称
sudo add-apt-repository ppa:systec/curl-7.35-trusty
sudo apt-get update
</code></pre>

<p>删除已添加的PPAs<br />
1. 仅删除&rdquo;sources.list.d/*.list&rdquo;文件内容</p>

<pre><code class="language-sh">sudo add-apt-repository --remove ppa:systec/curl-7.35-trusty
# 下面的命令等价
sudo apt-add-repository --remove ppa:system/curl-7.35-trusty
</code></pre>

<ol>
<li><p>(<strong>推荐</strong>)在<code>/etc/apt/sources.list.d</code> directory下面找到需删除PPA配置，并删除。</p>

<pre><code class="language-sh">sudo rm /etc/apt/sources.list.d/xxxx.list*
</code></pre></li>

<li><p>通过Software Sources(软件中心)-&gt;软件与更新，删除已添加的软件包</p></li>
</ol>

<p>添加Ubuntu官方(full url)软件仓库：</p>

<p><a href="https://zh.wikipedia.org/wiki/Ubuntu%E5%8F%91%E8%A1%8C%E7%89%88%E5%88%97%E8%A1%A8" title="点我访问">Ubuntu发行版列表</a></p>

<pre><code class="language-sh"># $(lsb_release -cs)获取系统版本(开发代号)
# 添加apt server repository
sudo add-apt-repository \
       &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
       $(lsb_release -cs) \
       stable&quot;
# 删除repository与vim /etc/apt/sources.list 删除相应行等同
sudo apt-add-repository --remove \
       &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
       $(lsb_release -cs) \
       stable&quot;
</code></pre>

<p>直接访问下<code>https://download.docker.com/linux/ubuntu</code>会发现目录地下有个dists目录，apt默认会到此目录地下寻找软件安装包。</p>

<p><img src="../../pictures/QQ20170411213604.png" alt="图片4" title="点我访问" /></p>

<p>进入<u>dists/</u>目录，就有对应的系统版本号(distribution)：trusty/、xenial/、yakkety/<br />
在进入<u>xenial/</u>目录，有对应的节点(section):edge/、pool/、stable/、test/</p>

<h4 id="apt-search-packagename-搜索apt服务器上指定名称的包">apt search packagename(搜索apt服务器上指定名称的包)</h4>

<pre><code class="language-sh">apt search curl #列出当前apt server或镜像站点里面的包信息
apt list        #列出apt server上所有的包
apt list curl 
</code></pre>

<h4 id="apt-y-install-packagename-从apt-server上下载并安装指定包">apt -y install packagename(从apt server上下载并安装指定包)</h4>

<pre><code class="language-sh">apt -y install curl
</code></pre>

<h4 id="apt的软件群组功能metapackages">apt的软件群组功能MetaPackages</h4>

<p>Ubuntu使用MetaPackages提供了跟RedHat的<code>yum grouplist</code>相似的功能，软件包群组！<br />
<a href="https://help.ubuntu.com/community/MetaPackages" title="点我访问">https://help.ubuntu.com/community/MetaPackages</a></p>

<h3 id="dpkg-本地计算机包管理">dpkg 本地计算机包管理</h3>

<p>使用dpkg命令可以有效的管理包。安装、更新、卸载、查询包。</p>

<h4 id="dpkg-l-packagename-列出本机是否已经安装了指定的包">dpkg -l packagename 列出本机是否已经安装了指定的包</h4>

<pre><code class="language-sh">dpkg -l curl

# 删除所有状态为rc的软件及配置文件
# r: the package is marked for removal.    
# c: the configuration files are currently present in the system.

dpkg -l | grep ^rc | awk 'print $2' | xargs sudo dpkg --purge
</code></pre>

<blockquote>
<p>参考</p>
</blockquote>

<ol>
<li>Yum（Yellow dog Updater, Modified）由Duke University团队，修改Yellow Dog Linux的Yellow Dog Updater开发而成，是一个基于RPM包管理的字符前端软件包管理器。能够从指定的服务器自动下载RPM包并且安装，可以处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。被Yellow Dog Linux本身，以及Fedora、Red Hat Enterprise Linux采用。【摘自《维基百科》】<br /></li>
<li><a href="https://en.wikipedia.org/wiki/Dpkg" title="点我访问">DPKG维基百科</a></li>
</ol>
                        
                    </section>

                    <footer class="right-align">
                        <p><small>Copyright &#169; Gerry</small></p>
                    </footer>

                    


                </article>
            </div>
        </div>
    </div>

    
<script src="https://gerrywp.github.io/blog/js/jquery-2.1.4.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/materialize.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/imagesloaded.pkgd.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/masonry.pkgd.min.js"></script>


    
    <script src="https://gerrywp.github.io/blog/js/highlight.pack.js"></script>



<script src="https://gerrywp.github.io/blog/js/lightbox.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/jquery.infinitescroll.min.js"></script>


<script src="https://gerrywp.github.io/blog/js/main.js"></script>


</body>

</html>





