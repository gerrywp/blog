+++
title = "git常用命令"
date = "2015-01-01"
tag = [ "tag1" ]
categories = [ "others" ]
+++

**命令别名**:~$ `git config --global alias.glog log --graph --pretty=format:%h-%cn,%cr:%s%d`
图形化显示提交日志
<!--more-->
### git命令杂项

1. -\-global参数。配置的是当前用户的配置文件，在windows下路径为：`%HOMEPATH%\.gitconfig`。
linux下为:`cd ~`下的.gitconfig文件。
2. -\-local。配置的是项目底下的.gitconfig文件
3. -\-system。配置的是系统文件,在windows下路径为:git安装路径下的`\mingw32\etc\gitconfig`文件。
linux下为:`/etc/gitconfig`文件。

### http/https记住用户名密码

`git config --global credential.helper`  
**"store"**模式接受一个 -\-file <path> 参数，可以自定义存放密码的文件路径（默认是`~/.git-credentials`）。

```shell
git config --global credential.helper store --file ~/.my-credentials
```

### 撤销和重置操作

checkout、reset都可以对workstation工作区的文件进行撤销更改。  
具体的区别参考git-scm的文档说明
[git手册](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E7%BD%AE%E6%8F%AD%E5%AF%86 '点我访问')

```shell
git checkout --hard --filename
git reset --hard --filename
```

### 设置commit默认编辑器为vim

ubuntu下git默认使用的文本编辑器为nano,使用起来感觉不顺手，可以通过修改配置文件改成自己喜欢的编辑器。

``` shell
#!/bin/bash
# 可以使用git var --help 查看变量设置
# git config --global --help 
git config --global core.editor vim
# 查看全局配置文件是否修改成功
git config --global -e
```

### git log显示commit所属分支

option:--decorate

```shell
git log --graph --decorate
# 或者使用format %d 达到同样的效果
git log --graph --format=%d
```
### 远程分支

```shell
# 查看远程分支
git branch -a
# 删除远程分支和标签
git push origin --delete <branchname>
git push origin --delete tag <tagname>
# 否则使用下面的方式，推送空分支
git push origin:
```
### windows下vs2017

1. visual studio 2017默认集成了git工具，在选择安装包的时候我们需要安装git for windows。
在「单个组件」···「代码工具」里面选中「适用于windows的git」。

![git in vs](../pictures/QQ20170627205054.png "请开启")

2. 打开安装好的git-bash,使用ssh-keygen命令生成ssh公钥和私钥

```shell
ssh-keygen -t rsa -C"your comment"
#-t参数 加密类型
#-C参数 注释
```
win10系统下必须要指定公钥生成的路径c:\users\username\.ssh\id_rsa

3. 将生成的公钥id_rsa.pub里面的内容复制，并添加到远程服务器上的「密钥管理」里面。

4. 生成known_hosts文件

```shell
ssh -t git@site.com #连接远程服务器
git pull
```
上述两个命令都会在.ssh\目录下生成一个known_hosts的文件

5. 现在可以直接使用vs2017自带的git工具了。

### git无法clone私有库

问题背景：公司有一个私有库我需要拷贝下来，使用git-gui图形页面可以克隆但是使用terminal克隆死活克隆不下来

```console
git clone http://192.168.0.30:3000
```

这样直接clone会提示无法连接到服务器，我们需要带上用户名密码

```console
git clone http://gerry:wp@192.168.0.30:3000
```

说明：gerry是用户名(请注意不是email)，wp是密码

参考链接

> [git手册](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%87%AD%E8%AF%81%E5%AD%98%E5%82%A8)


