+++
title = "npm run到底做了什么？"
date = "2024-12-12"
tags = ["npm","node","react"]
categories = [ "js" ]
+++
大鹏一日同风起，扶摇直上九万里！
<!--more-->

使用react-native脚手架创建的示例应用，npm run start 到底做了什么？
### npm run start
当我们用npm（node package manager）来管理JavaScript/TypeScript项目的时候，都会在项目的根目录下生成一个package.json文件。而这个文件里的script字段就是用于适配npm run XXX命令的。

当我们执行`npm run start`的时候，就会执行对应的`react-native-cli start`指令。可能有小伙伴会问了，那为什么不能直接执行`react-native-cli start`命令呢？因为这样会报错，操作系统path环境变量里只有npm相关的命令，不存在`react-native-cli`这个可执行文件；而我们在下载安装依赖的时候，会在node_modules/.bin目录下创建好名为react-native-cli(或.cmd)(或者ps1)的可执行文件：

而在.bin目录下，一般针对一个依赖模块，会有3个可执行文件，没有后缀名的是对应Unix系的shell脚本，`.cmd`为后缀名的是windows bat脚本，`.ps1`为后缀名的则是PowerShell中可执行文件（可以跨平台），三者作用都是用node执行一个js文件。我们可以打开名为的这个文件`react-native-cli.cmd`，看看里面的内容：

```bash
```


### 在不同的目录下运行node bin.js报错
root为项目根目录
..\root node  bin.js start 失败
root node  bin.js start 成功
root\node_modules node  bin.js start 成功
root\node_modules\.bin node  bin.js start 成功
root\node_modules\@任意目录 node  bin.js start 成功
root\node_modules\非@开头目录 node  bin.js start 失败
为什么？

### 源码分析

![maven/goal](../../pictures/企业微信截图_17157448964896.png 'plugin所有goals')


### 参考链接

> 1. https://zhuanlan.zhihu.com/p/513706080


